## 索引的创建  
### 单列索引  
- 普通索引:  
  最基本的索引,其sql格式是`CREATE INDEX IndexName ON 'TableName'('字段名'(length))` 或者`ALTER TABLE TableName ADD INDEX IndexName('字段名'(length))`  

- 唯一索引:  
  与普通索引类似,但是不同的是唯一索引要求所有的类的值是唯一的,这一点和主键索引一样.但是他允许有空值,其sql格式是 `CREATE UNIQUE INDEX IndexName ON 'TableName'('字段名'(length))` 或者 `ALTER TABLE TableName ADD UNIQUE (column_list)`   
- 主键索引:  
  不允许有空值,(在B+TREE中的InnoDB引擎中,主键索引起到了至关重要的地位).键索引建立的规则是 int优于varchar,一般在建表的时候创建,最好是与表的其他字段不相关的列或者是业务不相关的列.一般会设为 int 而且是 AUTO_INCREMENT自增类型的  

### 组合索引
一个表中含有多个单列索引不代表是组合索引,通俗一点讲,组合索引是:同时包含多个字段的索引.
其sql格式是`CREATE INDEX IndexName On 'TableName'('字段名'(length),'字段名'(length),...)`   
如果你为a,b,c 3列建立了组合索引,即`(a,b,c)`这个索引,事实上相当于建立了`(a)`,`(a,b)`,`(a,b,c)`这3个索引.  
但在查询的时候符合"最左前缀"才能使用索引.(比如where中只有列a,c则只能使用a的索引,因为列b被跳过了)

## 使用索引的优点
1. 可以通过建立唯一索引或者主键索引,保证数据库表中每一行数据的唯一性.  
2. 建立索引可以大大提高检索的数据,以及减少表的检索行数  
3. 在表连接的连接条件 可以加速表与表直接的相连   
4. 排序的字段如果已经被索引(需要顺序相同),则可以提高性能,减少文件排序.
5. 建立索引,在查询中使用索引可以提高性能  

## 使用索引的缺点  
1. 在创建索引和维护索引会耗费时间,随着数据量的增加而增加  
2. 索引文件会占用物理空间,除了数据表需要占用物理空间之外,每一个索引还会占用一定的物理空间(`对于innodb的二级索引,由于其保存了主键的值,主键对二级索引的影响也很重要`)  
3. 当对表的数据进行 INSERT,UPDATE,DELETE 的时候,索引也要动态的维护,这样就会降低数据的维护速度,(建立索引会占用磁盘空间的索引文件。一般情况这个问题不太严重，但如果你在一个大表上创建了多种组合索引，索引文件的会膨胀很快)。

## 使用索引需要注意的地方
在建立索引的时候应该考虑索引应该建立在数据库表中的某些列上面 哪一些索引需要建立,哪一些所以是多余的.
一般来说,
1. 在经常需要搜索的列上,可以加快索引的速度

2. 主键列上可以确保列的唯一性  

3. 在表与表的的连接条件上加上索引,可以加快连接查询的速度  

4. 在经常需要排序(order by),分组(group by)和的distinct 列上加索引可以加快排序查询的时间,  (单独order by 用不了索引，索引考虑加where 或加limit)  

5. 在一些where 之后的 < <= > >= BETWEEN IN 以及某个情况下的like 建立字段的索引(B-TREE)  

6. like语句的 如果你对nickname字段建立了一个索引.当查询的时候的语句是 nickname lick '%ABC%' 那么这个索引讲不会起到作用.而nickname lick 'ABC%' 那么将可以用到索引

7. 索引不会包含NULL列,如果列中包含NULL值都将不会被包含在索引中,**复合索引中如果有一列含有NULL值那么这个组合索引都将失效**,一般需要给默认值0或者 ' '字符串  

8. 使用短索引,如果你的一个字段是Char(32)或者int(32),在创建索引的时候指定前缀长度 比如前10个字符 (前提是多数值是唯一的..)那么短索引可以提高查询速度,并且可以减少磁盘的空间,也可以减少I/0操作.  

9. **不要在列上进行运算,这样会使得mysql索引失效**,也会进行全表扫描  

10. 选择越小的数据类型越好,因为通常越小的数据类型通常在磁盘,内存,cpu,缓存中占用的空间很少,处理起来更快  

## 什么情况下不创建索引  
1. 查询中很少使用到的列 不应该创建索引,如果建立了索引然而还会降低mysql的性能和增大了空间需求.  

2. 很少数据的列也不应该建立索引,比如 一个性别字段 0或者1,在查询中,结果集的数据占了表中数据行的比例比较大,mysql需要扫描的行数很多,增加索引,并不能提高效率(这是一种双向选择,如果每个查询都需要性别字段,那么覆盖索引包含性别能提升性能,因为从索引中能直接找到所需要的数据,减少一次通过指针寻找数据页的消耗)  

3. 定义为text和image和bit数据类型的列不应该增加索引(但可以选择增加前缀索引,即只对前一小部分建立索引)  

4. 当表的修改(UPDATE,INSERT,DELETE)操作远远大于检索(SELECT)操作时不应该创建索引,这两个操作是互斥的关系
